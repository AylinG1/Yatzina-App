<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêæ Animales de la Sierra Otom√≠</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', cursive, sans-serif;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0% { background: linear-gradient(135deg, #145c48, #10b981); }
            25% { background: linear-gradient(135deg, #10b981, #a7f3d0); }
            50% { background: linear-gradient(135deg, #a7f3d0, #065f46); }
            75% { background: linear-gradient(135deg, #065f46, #22c55e); }
            100% { background: linear-gradient(135deg, #22c55e, #145c48); }
        }

        /* Hojas flotantes */
        .leaf {
            position: fixed;
            font-size: 24px;
            animation: leafFall linear infinite;
            opacity: 0.7;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes leafFall {
            0% { 
                top: -50px; 
                opacity: 1;
                transform: rotate(0deg);
            }
            100% { 
                top: 100vh; 
                opacity: 0;
                transform: rotate(360deg);
            }
        }

        /* Contenedor principal */
        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Pantalla de inicio */
        .start-screen {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .start-screen h1 {
            font-size: 3.5em;
            color: #145c48;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .start-screen p {
            font-size: 1.3em;
            color: #065f46;
            margin-bottom: 30px;
        }

        .difficulty-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            padding: 20px 40px;
            font-size: 1.5em;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            font-weight: bold;
        }

        .difficulty-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .easy { background: linear-gradient(135deg, #a7f3d0, #6ee7b7); color: #065f46; }
        .medium { background: linear-gradient(135deg, #34d399, #10b981); color: white; }
        .hard { background: linear-gradient(135deg, #059669, #047857); color: white; }

        /* Pantalla de juego */
        .game-screen {
            display: none;
        }

        .game-header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .lives {
            display: flex;
            gap: 10px;
            font-size: 2em;
        }

        .heart {
            animation: heartBeat 1s infinite;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            10%, 30% { transform: scale(1.1); }
            20%, 40% { transform: scale(1); }
        }

        .timer {
            font-size: 1.8em;
            color: #065f46;
            font-weight: bold;
        }

        .timer.warning { color: #f59e0b; }
        .timer.danger { color: #dc2626; animation: blink 0.5s infinite; }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .score {
            font-size: 1.5em;
            color: #065f46;
            font-weight: bold;
        }

        .help-btn {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        .help-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Grid de cartas */
        .cards-grid {
            display: grid;
            gap: 15px;
            margin-top: 20px;
            perspective: 1000px;
        }

        .cards-grid.easy {
            grid-template-columns: repeat(4, 1fr);
        }

        .cards-grid.medium {
            grid-template-columns: repeat(4, 1fr);
        }

        .cards-grid.hard {
            grid-template-columns: repeat(6, 1fr);
        }

        .card {
            aspect-ratio: 1;
            position: relative;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.matched {
            animation: matchSuccess 0.6s ease;
        }

        @keyframes matchSuccess {
            0% { transform: rotateY(180deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.15); }
            100% { transform: rotateY(180deg) scale(1); }
        }

        .card.shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            padding: 10px;
            text-align: center;
        }

        .card-front {
            background: linear-gradient(135deg, #a7f3d0, #6ee7b7);
            border: 4px solid #10b981;
        }

        .card-front::before {
            content: "üêæ";
            font-size: 2.5em;
        }

        .card-back {
            background: linear-gradient(135deg, #ffffff, #f0fdf4);
            border: 4px solid #22c55e;
            transform: rotateY(180deg);
            color: #065f46;
            flex-direction: column;
            gap: 5px;
        }

        .card-back.otomi {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 4px solid #f59e0b;
        }

        /* Pantallas de resultado */
        .result-screen {
            display: none;
            text-align: center;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        .result-screen h2 {
            font-size: 3em;
            margin-bottom: 20px;
            color: #145c48;
        }

        .result-screen.victory h2 {
            color: #10b981;
            animation: rainbow 3s infinite;
        }

        @keyframes rainbow {
            0% { color: #10b981; }
            25% { color: #22c55e; }
            50% { color: #34d399; }
            75% { color: #6ee7b7; }
            100% { color: #10b981; }
        }

        .stats {
            margin: 30px 0;
            font-size: 1.4em;
            color: #065f46;
            line-height: 2;
        }

        .animals-list {
            background: rgba(167, 243, 208, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .animal-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 10px;
            font-size: 1.2em;
        }

        .restart-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.5em;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        /* Confeti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #22c55e;
            animation: confettiFall 3s linear;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes confettiFall {
            0% { transform: translateY(0) rotateZ(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .cards-grid.easy,
            .cards-grid.medium {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .cards-grid.hard {
                grid-template-columns: repeat(4, 1fr);
            }

            .start-screen h1 {
                font-size: 2.5em;
            }

            .card-face {
                font-size: 1em;
            }
        }

        @media (max-width: 480px) {
            .cards-grid.easy,
            .cards-grid.medium,
            .cards-grid.hard {
                grid-template-columns: repeat(2, 1fr);
            }

            .difficulty-buttons {
                flex-direction: column;
            }

            .difficulty-btn {
                width: 100%;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Hojas flotantes -->
    <div id="leaves-container"></div>

    <div class="container">
        <!-- Pantalla de inicio -->
        <div id="start-screen" class="start-screen">
            <h1>üêæ Animales en H√±√§h√±u üêæ</h1>
            <p>Aprende los nombres de animales de la Sierra Otom√≠</p>
            <p style="font-size: 1.1em; margin-bottom: 30px;">
                Encuentra las parejas (Otom√≠ - Espa√±ol) antes de perder tus 5 vidas üíö
            </p>
            <div class="difficulty-buttons">
                <button class="difficulty-btn easy" onclick="startGame('easy')">
                    üê∞ F√°cil<br><small>8 cartas - Sin l√≠mite</small>
                </button>
                <button class="difficulty-btn medium" onclick="startGame('medium')">
                    ü¶ä Medio<br><small>16 cartas - 90 seg</small>
                </button>
                <button class="difficulty-btn hard" onclick="startGame('hard')">
                    üê∫ Dif√≠cil<br><small>24 cartas - 60 seg</small>
                </button>
            </div>
        </div>

        <!-- Pantalla de juego -->
        <div id="game-screen" class="game-screen">
            <div class="game-header">
                <div class="lives" id="lives"></div>
                <div class="timer" id="timer"></div>
                <div class="score" id="score">Pares: 0/<span id="total-pairs">0</span></div>
                <button class="help-btn" id="help-btn" onclick="useHelp()">
                    üí° Ayuda (<span id="help-count">3</span>)
                </button>
            </div>
            <div class="cards-grid" id="cards-grid"></div>
        </div>

        <!-- Pantalla de Game Over -->
        <div id="gameover-screen" class="result-screen">
            <h2>üò¢ ¬°Se acabaron las vidas!</h2>
            <p style="font-size: 1.5em; color: #065f46; margin: 20px 0;">
                El bosque te espera de nuevo
            </p>
            <div class="stats" id="gameover-stats"></div>
            <button class="restart-btn" onclick="location.reload()">üîÑ Reiniciar aventura</button>
        </div>

        <!-- Pantalla de Victoria -->
        <div id="victory-screen" class="result-screen victory">
            <h2>üéâ ¬°LECCI√ìN COMPLETADA! üéâ</h2>
            <p style="font-size: 1.8em; color: #10b981; margin: 20px 0; font-weight: bold;">
                Dominaste los animales de la Sierra Otom√≠
            </p>
            <div class="stats" id="victory-stats"></div>
            <div class="animals-list" id="animals-learned"></div>
            <button class="restart-btn" onclick="location.reload()">üåü Jugar de nuevo</button>
        </div>
    </div>

    <script>
        // Base de datos de animales
        const allAnimals = [
            { otomi: "D√§mi", spanish: "Venado", sound: "ü¶å" },
            { otomi: "Tsibi", spanish: "Coyote", sound: "üê∫" },
            { otomi: "Za", spanish: "Zorrillo", sound: "ü¶®" },
            { otomi: "NzaÃ±", spanish: "Armadillo", sound: "ü¶î" },
            { otomi: "K'ont'i", spanish: "Tlacuache", sound: "ü¶°" },
            { otomi: "P√§t'√§", spanish: "Conejo", sound: "üê∞" },
            { otomi: "BuÃ±ts'i", spanish: "Ardilla", sound: "üêøÔ∏è" },
            { otomi: "√ë√§", spanish: "Zorro", sound: "ü¶ä" },
            { otomi: "Mf√∂", spanish: "Mapache", sound: "ü¶ù" },
            { otomi: "T'ekw√§", spanish: "Murci√©lago", sound: "ü¶á" },
            { otomi: "√ë√§ni", spanish: "Rata", sound: "üêÄ" },
            { otomi: "NguÃ±", spanish: "Puma", sound: "üêÜ" }
        ];

        // Variables del juego
        let difficulty = 'medium';
        let lives = 5;
        let pairs = 0;
        let totalPairs = 0;
        let flippedCards = [];
        let matchedPairs = 0;
        let canFlip = true;
        let timer = null;
        let timeLeft = 0;
        let helpCount = 3;
        let startTime = 0;
        let selectedAnimals = [];

        // Crear hojas flotantes
        function createLeaves() {
            const container = document.getElementById('leaves-container');
            for (let i = 0; i < 15; i++) {
                const leaf = document.createElement('div');
                leaf.className = 'leaf';
                leaf.textContent = 'üçÉ';
                leaf.style.left = Math.random() * 100 + '%';
                leaf.style.animationDuration = (5 + Math.random() * 10) + 's';
                leaf.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(leaf);
            }
        }

        // Iniciar juego
        function startGame(level) {
            difficulty = level;
            lives = 5;
            matchedPairs = 0;
            helpCount = 3;
            startTime = Date.now();

            // Determinar n√∫mero de pares
            if (level === 'easy') {
                totalPairs = 4;
                selectedAnimals = allAnimals.slice(0, 4);
            } else if (level === 'medium') {
                totalPairs = 8;
                selectedAnimals = allAnimals.slice(0, 8);
                timeLeft = 90;
            } else {
                totalPairs = 12;
                selectedAnimals = allAnimals;
                timeLeft = 60;
            }

            // Actualizar UI
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-screen').style.display = 'block';
            document.getElementById('total-pairs').textContent = totalPairs;
            document.getElementById('help-count').textContent = helpCount;

            updateLives();
            createCards();

            if (level !== 'easy') {
                startTimer();
            }
        }

        // Crear cartas
        function createCards() {
            const grid = document.getElementById('cards-grid');
            grid.innerHTML = '';
            grid.className = 'cards-grid ' + difficulty;

            const cards = [];

            // Crear pares de cartas
            selectedAnimals.forEach((animal, index) => {
                // Carta en otom√≠
                cards.push({
                    id: index * 2,
                    pairId: index,
                    type: 'otomi',
                    text: animal.otomi,
                    animal: animal
                });

                // Carta en espa√±ol
                cards.push({
                    id: index * 2 + 1,
                    pairId: index,
                    type: 'spanish',
                    text: animal.spanish,
                    animal: animal
                });
            });

            // Mezclar cartas
            cards.sort(() => Math.random() - 0.5);

            // Crear elementos de cartas
            cards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.id = card.id;
                cardElement.dataset.pairId = card.pairId;
                cardElement.dataset.type = card.type;

                cardElement.innerHTML = `
                    <div class="card-face card-front"></div>
                    <div class="card-face card-back ${card.type}">
                        <div>${card.animal.sound}</div>
                        <div>${card.text}</div>
                    </div>
                `;

                cardElement.addEventListener('click', () => flipCard(cardElement, card));
                grid.appendChild(cardElement);
            });
        }

        // Voltear carta
        function flipCard(cardElement, card) {
            if (!canFlip || cardElement.classList.contains('flipped') || cardElement.classList.contains('matched')) {
                return;
            }

            cardElement.classList.add('flipped');
            flippedCards.push({ element: cardElement, card: card });

            // Reproducir sonido (simulado)
            playSound(card.animal.sound);

            if (flippedCards.length === 2) {
                canFlip = false;
                setTimeout(checkMatch, 800);
            }
        }

        // Verificar coincidencia
        function checkMatch() {
            const [first, second] = flippedCards;

            if (first.card.pairId === second.card.pairId) {
                // ¬°Coincidencia!
                first.element.classList.add('matched');
                second.element.classList.add('matched');
                matchedPairs++;
                updateScore();
                createConfetti();
                playSuccessSound();

                if (matchedPairs === totalPairs) {
                    setTimeout(victory, 1000);
                }
            } else {
                // No coincide
                lives--;
                updateLives();
                first.element.classList.add('shake');
                second.element.classList.add('shake');
                playErrorSound();

                setTimeout(() => {
                    first.element.classList.remove('flipped', 'shake');
                    second.element.classList.remove('flipped', 'shake');
                }, 1000);

                if (lives === 0) {
                    setTimeout(gameOver, 1000);
                }
            }

            flippedCards = [];
            canFlip = true;
        }

        // Actualizar vidas
        function updateLives() {
            const livesContainer = document.getElementById('lives');
            livesContainer.innerHTML = '';
            for (let i = 0; i < 5; i++) {
                const heart = document.createElement('span');
                heart.className = 'heart';
                heart.textContent = i < lives ? 'üíö' : 'ü§ç';
                livesContainer.appendChild(heart);
            }
        }

        // Actualizar puntuaci√≥n
        function updateScore() {
            document.getElementById('score').innerHTML = `Pares: ${matchedPairs}/<span id="total-pairs">${totalPairs}</span>`;
        }

        // Temporizador
        function startTimer() {
            const timerElement = document.getElementById('timer');
            
            timer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = `‚è±Ô∏è ${timeLeft}s`;

                if (timeLeft <= 10 && timeLeft > 5) {
                    timerElement.className = 'timer warning';
                } else if (timeLeft <= 5) {
                    timerElement.className = 'timer danger';
                }

                if (timeLeft <= 0) {
                    clearInterval(timer);
                    gameOver();
                }
            }, 1000);
        }

        // Ayuda
        function useHelp() {
            if (helpCount <= 0 || matchedPairs === totalPairs) return;

            helpCount--;
            document.getElementById('help-count').textContent = helpCount;

            if (helpCount === 0) {
                document.getElementById('help-btn').disabled = true;
            }

            // Mostrar todas las cartas por 2 segundos
            const allCards = document.querySelectorAll('.card:not(.matched)');
            allCards.forEach(card => card.classList.add('flipped'));

            setTimeout(() => {
                allCards.forEach(card => card.classList.remove('flipped'));
            }, 2000);
        }

        // Confeti
        function createConfetti() {
            const colors = ['#22c55e', '#10b981', '#34d399', '#6ee7b7', '#a7f3d0'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    document.body.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // Sonidos (simulados con consola)
        function playSound(emoji) {
            console.log(`[v0] Reproduciendo sonido: ${emoji}`);
        }

        function playSuccessSound() {
            console.log('[v0] ¬°Acierto! üéâ');
        }

        function playErrorSound() {
            console.log('[v0] Error ‚ùå');
        }

        // Game Over
        function gameOver() {
            if (timer) clearInterval(timer);
            
            const elapsedTime = Math.floor((Date.now() - startTime) / 1000);
            const accuracy = totalPairs > 0 ? Math.round((matchedPairs / totalPairs) * 100) : 0;

            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('gameover-screen').style.display = 'block';
            
            document.getElementById('gameover-stats').innerHTML = `
                <div>Pares encontrados: <strong>${matchedPairs}/${totalPairs}</strong></div>
                <div>Tiempo jugado: <strong>${elapsedTime} segundos</strong></div>
                <div>Precisi√≥n: <strong>${accuracy}%</strong></div>
            `;
        }

        // Victoria
        function victory() {
            if (timer) clearInterval(timer);
            
            const elapsedTime = Math.floor((Date.now() - startTime) / 1000);
            const vidasRestantes = lives;

            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('victory-screen').style.display = 'block';

            document.getElementById('victory-stats').innerHTML = `
                <div>‚è±Ô∏è Tiempo: <strong>${elapsedTime} segundos</strong></div>
                <div>üíö Vidas restantes: <strong>${vidasRestantes}/5</strong></div>
                <div>‚úÖ Pares completados: <strong>${matchedPairs}/${totalPairs}</strong></div>
            `;

            // Lista de animales aprendidos
            const animalsList = document.getElementById('animals-learned');
            animalsList.innerHTML = '<h3 style="color: #065f46; margin-bottom: 15px;">Animales aprendidos:</h3>';
            selectedAnimals.forEach(animal => {
                const item = document.createElement('div');
                item.className = 'animal-item';
                item.innerHTML = `
                    <span>${animal.sound} <strong>${animal.otomi}</strong></span>
                    <span>${animal.spanish}</span>
                `;
                animalsList.appendChild(item);
            });

            // Confeti de victoria
            for (let i = 0; i < 100; i++) {
                setTimeout(() => createConfetti(), i * 50);
            }
        }

        // Inicializar
        createLeaves();
    </script>
</body>
</html>
